/*
 * Name: SewiseCut framework 1.0.0
 * Author: Jack Zhang
 * Website: http://www.sewise.com
 * Date: July 16, 2014
 * Copyright: 2013-2014, Sewise
 * Mail: jackzhang1204@gmail.com
 * 
 */

(function(a){a.SewiseCut=a.SewiseCut||{name:"Sewise Cut",version:"1.0.0",build:"2014.7.15 15:00",script:"",localPath:""}})(window);(function(){SewiseCut.Utils={jsonp:function(a){var b=a.url,d=a.jsonp,h=a.jsonpCallback,f=a.data,a=a.success,e="",c;for(c in f)e+="&"+c+"="+f[c];e="?"+e.slice(1);void 0===d&&(d="callback");void 0===h&&(h="callbackFun"+(new Date).getTime());var b=b+e+("&"+d+"="+h),g=document.createElement("script");g.setAttribute("type","text/javascript");g.src=b;document.body.appendChild(g);window[h]=a;g.onload=g.onreadystatechange=function(){(!this.readyState||"loaded"==this.readyState||"complete"==this.readyState)&&
document.body.removeChild(g)}},getScript:function(a){var b=a.url,d=a.data,h=a.success,a="",f;for(f in d)a+="&"+f+"="+d[f];var a="?"+a.slice(1),b=b+a,e=document.createElement("script");e.setAttribute("type","text/javascript");e.src=b;document.body.appendChild(e);e.onload=e.onreadystatechange=function(){h();(!this.readyState||"loaded"==this.readyState||"complete"==this.readyState)&&document.body.removeChild(e)}},getParameters:function(a){var b=document.getElementsByTagName("script"),d;try{for(var h=
b.length,f=0;f<h;f++){var e=b[f].src.split("?"),c=e[0],g=c.split("/"),c=1==g.length?g[0]:g[g.length-1];if(c==a[0]||c==a[1]){d=1<e.length?e[1].split("&"):[];SewiseCut.script=b[f];if(c==a[1]){var m=e[0].lastIndexOf("/");if(0<m)SewiseCut.localPath=e[0].slice(0,m+1)}break}}for(var a={},k,j,n,b=0,o=d.length;b<o;b++)k=d[b].split("="),j=k[0],n=k[1],"undefined"==typeof a[j]?a[j]=n:("string"==typeof a[j]&&(a[j]=[a[j]]),a[j].push(n));return a}catch(p){return[]}},object:{isEmpty:function(a){for(var b in a)return!1;
return!0}},browser:{versions:function(){var a=navigator.userAgent;return{trident:-1<a.indexOf("Trident"),presto:-1<a.indexOf("Presto"),webKit:-1<a.indexOf("AppleWebKit"),gecko:-1<a.indexOf("Gecko")&&-1==a.indexOf("KHTML"),mobile:!!a.match(/AppleWebKit.*Mobile.*/),ios:!!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:-1<a.indexOf("Android"),iPhone:-1<a.indexOf("iPhone"),iPad:-1<a.indexOf("iPad"),webApp:-1==a.indexOf("Safari")}}(),supportH5:function(){var a=!1;navigator.geolocation&&(a=!0);return a}(),
supportFlash:function(){if(0<navigator.mimeTypes.length){var a=navigator.mimeTypes["application/x-shockwave-flash"];return void 0!==a?void 0!==a.enabledPlugin:!1}if(self.ActiveXObject)try{return new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),!0}catch(b){return!1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},location:{hostname:function(a){if(a){var b=document.createElement("a");b.href=a;return b.hostname}return window.location.hostname},port:function(a){if(a){var b=
document.createElement("a");b.href=a;return b.port}return window.location.port},porthost:function(a){var b;a?(b=document.createElement("a"),b.href=a,a=b.hostname,b=b.port):(a=window.location.hostname,b=window.location.port);var d=a;b&&""!==b&&(d=a+":"+b);return d}},loader:{loadCssFile:function(a,b){var d=document.createElement("link");d.rel="stylesheet";d.href=a;if(b)d.onerror=function(){b()};document.getElementsByTagName("head")[0].appendChild(d)},loadJsFile:function(a,b,d,h,f){var e=document.getElementsByTagName("head")[0],
c=null;if(!a&&!f||"override"==a){c=document.createElement("script");c.type="text/javascript";c.charset="utf-8";c.src=b;if(d)c.onload=c.onreadystatechange=function(){if(c.ready)return!1;if(!c.readyState||"loaded"==c.readyState||"complete"==c.readyState)c.ready=!0,d()};if(h)c.onerror=function(){h()};e.appendChild(c)}else d&&d()}}}})();(function(){function a(){q={skin:h,serverPath:f,serverApi:e,videoUrl:c,programName:g,programStartTime:m,programEndTime:k,dataInterval:j,buffer:n,type:o,requestUrl:p,callback:r};SewiseCut.Utils.loader.loadJsFile(window.swfobject,SewiseCut.localPath+"swfobject.js",b)}function b(){d(u,q)}function d(a,b){var c=document.createElement("div");c.id="swf-container";a.appendChild(c);swfobject.embedSWF(SewiseCut.localPath+"CutCenterFlex.swf","swf-container","100%","100%","9.0.115",!1,b,{allowfullscreen:!0,wmode:"transparent",
allowscriptaccess:"always"},{id:"SewiseCut",name:"SewiseCut"},function(){})}var h="",f,e="ServerApi.execute",c,g,m,k,j=10,n=5,o="flv",p="",r="",i=SewiseCut.Utils.getParameters(["SewiseCut.js","sewise.cut.min.js"]),u=SewiseCut.script.parentNode,l=SewiseCut.Utils.location.porthost(SewiseCut.localPath),s,q;"true"==(i.debug?i.debug:"false")&&(l="192.168.1.29");s="http://"+l+"/service/playerapi/";f="http://"+l+"/flashservice/gateway.php";r=i.callback?i.callback:"";g=i.videoname?i.videoname:"";var p=l=
i.url?i.url:"",h=SewiseCut.localPath+"assets/cutplayer/xcut.swf",t=l.split(":");"http"==t[0]?(c=l,m=i.starttime?i.starttime:"",k=i.endtime?i.endtime:"",a()):"vod"==t[0]&&SewiseCut.Utils.jsonp({url:s,jsonp:"jsproxy",jsonpCallback:"callbackFun",data:{"do":"geturl",url:l},success:function(b){c=b.infos.url;if(""===g)g=b.infos.name;m=b.infos.starttime;k=b.infos.endtime;a()}})})(window);
